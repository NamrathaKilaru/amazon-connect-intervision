{"Version":"2019-10-30","StartAction":"f7788691-f8f0-4cde-9f7d-1473990b4a76","Metadata":{"entryPointPosition":{"x":40,"y":40},"ActionMetadata":{"f7788691-f8f0-4cde-9f7d-1473990b4a76":{"position":{"x":112,"y":152.8}},"dbc91372-2a42-4091-ba25-decc00851249":{"position":{"x":1256,"y":704.8}},"a5196a1b-a6b6-42f4-88ee-31deb9062e68":{"position":{"x":999.2,"y":691.2}},"062b1a62-bfac-4ce5-839d-9eeddba9be4f":{"position":{"x":2052.8,"y":73.6}},"0ccb4d7f-9bcf-4fd1-80c2-1306710b4ee4":{"position":{"x":1731.2,"y":480}},"f9a4ae14-2bcf-4066-bfda-253639ba9b3c":{"position":{"x":1963.2,"y":316}},"b3e78d1f-7e42-440c-af6c-49cf62bff1fd":{"position":{"x":1490.4,"y":297.6}},"78ca1539-a8f4-41f7-be2e-83dd00d4144b":{"position":{"x":1268,"y":-130.4}},"ba7830f9-032e-4f52-b684-63fd41905d46":{"position":{"x":1041.6,"y":-133.6},"parameters":{"QueueId":{"displayName":"Business"}},"queue":{"text":"Business"}},"41e37408-43c4-4ece-8ae5-9049bc97632a":{"position":{"x":1266.4,"y":33.6}},"44bc6a76-4ae6-4980-8c79-bcc14c8e010d":{"position":{"x":1056,"y":434.4},"parameters":{"QueueId":{"displayName":"Platinum"}},"queue":{"text":"Platinum"}},"0939271f-69d8-4e64-9ae9-4ba76e24220c":{"position":{"x":1284.8,"y":187.2}},"a208b96e-e4c2-48a2-8e1f-299d0236a125":{"position":{"x":1045.6,"y":57.6},"parameters":{"QueueId":{"displayName":"Gold"}},"queue":{"text":"Gold"}},"f87c28db-1abf-4999-84a1-ae2e9d3a1888":{"position":{"x":1280,"y":379.2}},"86b056bd-8975-4120-b2ce-c36a2789cff8":{"position":{"x":1031.2,"y":244.8},"parameters":{"QueueId":{"displayName":"Silver"}},"queue":{"text":"Silver"}},"ca702657-4318-45e7-8e79-5e01ddbe777a":{"position":{"x":799.2,"y":-4.8},"conditions":[],"conditionMetadata":[{"id":"49389737-22b7-4759-9955-f84a2d438012","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Business"},{"id":"bd005cf1-ac8a-44ea-9cd4-52292a4db927","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Gold"},{"id":"f32e32cf-15b7-45c7-bfdb-dda2fd12dc60","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Silver"},{"id":"2653ccfc-4424-46b1-a735-679edf6d4b18","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Platinum"}]},"abe68c59-2f0d-488c-a080-6b4b59d71279":{"position":{"x":111.2,"y":349.6}},"435b3220-952f-4bd8-81f5-1be2abf25f21":{"position":{"x":521.6,"y":629.6}},"7acf3728-51be-4770-931b-2bd2b99656d9":{"position":{"x":787.2,"y":492.8}},"48b5d355-b7fe-426e-a137-0de1c4e7ef9e":{"position":{"x":570.4,"y":-56.8},"parameters":{"LambdaFunctionARN":{"displayName":"getMembership"}},"dynamicMetadata":{}},"ba5fb691-aa19-4ea6-a06c-03b7b4cbc3a7":{"position":{"x":116,"y":520.8},"overrideConsoleVoice":true},"4f2e788f-9464-494a-9eeb-c7f3ef984a07":{"position":{"x":572,"y":167.2},"parameters":{"LexV2Bot":{"AliasArn":{"displayName":"Production","useLexBotDropdown":true,"lexV2BotName":"AccountType"}}},"useLexBotDropdown":true,"lexV2BotName":"AccountType","lexV2BotAliasName":"Production","conditionMetadata":[{"id":"4e0362ab-cb3d-4814-bbe9-37536ccbf0a7","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"BusinessAccount"},{"id":"fd47f5f7-6913-496c-bc5b-764ef0c4ddd0","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"PersonalAccount"}]},"9aee3cef-25ac-49f2-ae61-d289bd474ba6":{"position":{"x":318.4,"y":23.2},"parameters":{"LexV2Bot":{"AliasArn":{"displayName":"Production","useLexBotDropdown":true,"lexV2BotName":"AnythingElse"}}},"useLexBotDropdown":true,"lexV2BotName":"AnythingElse","lexV2BotAliasName":"Production","conditionMetadata":[{"id":"5ec793dc-bc11-49f3-a685-53d4732c6539","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"YES"},{"id":"dbffaf94-8ef6-473f-8b19-66c651df2584","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"NO"}]},"24c3f6b2-f4fe-4d43-8a27-e36468017f0f":{"position":{"x":329.6,"y":286.4},"parameters":{"LexV2Bot":{"AliasArn":{"displayName":"Production","useLexBotDropdown":true,"lexV2BotName":"MainMenu"}}},"useLexBotDropdown":true,"lexV2BotName":"MainMenu","lexV2BotAliasName":"Production","conditionMetadata":[{"id":"97427047-a7aa-4ad0-9fdb-ad8929d18f85","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"AccountManagement"},{"id":"36b889c1-9a84-46cd-865c-c3f60521eaf7","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"ScheduleAppointment"}]}},"Annotations":[],"name":"IVR Flow","description":"","type":"contactFlow","status":"published","hash":{}},"Actions":[{"Parameters":{"FlowLoggingBehavior":"Enabled"},"Identifier":"f7788691-f8f0-4cde-9f7d-1473990b4a76","Type":"UpdateFlowLoggingBehavior","Transitions":{"NextAction":"abe68c59-2f0d-488c-a080-6b4b59d71279"}},{"Parameters":{},"Identifier":"dbc91372-2a42-4091-ba25-decc00851249","Type":"DisconnectParticipant","Transitions":{}},{"Parameters":{"Text":"You have exceeded the maximum number of attempts. Please try again later."},"Identifier":"a5196a1b-a6b6-42f4-88ee-31deb9062e68","Type":"MessageParticipant","Transitions":{"NextAction":"dbc91372-2a42-4091-ba25-decc00851249","Errors":[{"NextAction":"dbc91372-2a42-4091-ba25-decc00851249","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"062b1a62-bfac-4ce5-839d-9eeddba9be4f","Type":"DisconnectParticipant","Transitions":{}},{"Parameters":{},"Identifier":"0ccb4d7f-9bcf-4fd1-80c2-1306710b4ee4","Type":"TransferContactToQueue","Transitions":{"NextAction":"f9a4ae14-2bcf-4066-bfda-253639ba9b3c","Errors":[{"NextAction":"f9a4ae14-2bcf-4066-bfda-253639ba9b3c","ErrorType":"QueueAtCapacity"},{"NextAction":"f9a4ae14-2bcf-4066-bfda-253639ba9b3c","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"We are currently experiencing a high volume of calls. Please try again later."},"Identifier":"f9a4ae14-2bcf-4066-bfda-253639ba9b3c","Type":"MessageParticipant","Transitions":{"NextAction":"062b1a62-bfac-4ce5-839d-9eeddba9be4f","Errors":[{"NextAction":"062b1a62-bfac-4ce5-839d-9eeddba9be4f","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Please hold for the next available representative."},"Identifier":"b3e78d1f-7e42-440c-af6c-49cf62bff1fd","Type":"MessageParticipant","Transitions":{"NextAction":"0ccb4d7f-9bcf-4fd1-80c2-1306710b4ee4","Errors":[{"NextAction":"0ccb4d7f-9bcf-4fd1-80c2-1306710b4ee4","ErrorType":"NoMatchingError"}]}},{"Parameters":{"QueuePriority":"1"},"Identifier":"78ca1539-a8f4-41f7-be2e-83dd00d4144b","Type":"UpdateContactRoutingBehavior","Transitions":{"NextAction":"b3e78d1f-7e42-440c-af6c-49cf62bff1fd"}},{"Parameters":{"QueueId":"arn:aws:connect:us-west-2:533267357589:instance/e022b7cf-3653-4e87-8e1c-0e597a46b14b/queue/889b9941-4ac1-4de2-ac9d-bf243475d65b"},"Identifier":"ba7830f9-032e-4f52-b684-63fd41905d46","Type":"UpdateContactTargetQueue","Transitions":{"NextAction":"78ca1539-a8f4-41f7-be2e-83dd00d4144b","Errors":[{"NextAction":"78ca1539-a8f4-41f7-be2e-83dd00d4144b","ErrorType":"NoMatchingError"}]}},{"Parameters":{"QueuePriority":"2"},"Identifier":"41e37408-43c4-4ece-8ae5-9049bc97632a","Type":"UpdateContactRoutingBehavior","Transitions":{"NextAction":"b3e78d1f-7e42-440c-af6c-49cf62bff1fd"}},{"Parameters":{"QueueId":"arn:aws:connect:us-west-2:533267357589:instance/e022b7cf-3653-4e87-8e1c-0e597a46b14b/queue/76528a83-dedd-439c-b48e-d6383597b5c7"},"Identifier":"44bc6a76-4ae6-4980-8c79-bcc14c8e010d","Type":"UpdateContactTargetQueue","Transitions":{"NextAction":"41e37408-43c4-4ece-8ae5-9049bc97632a","Errors":[{"NextAction":"41e37408-43c4-4ece-8ae5-9049bc97632a","ErrorType":"NoMatchingError"}]}},{"Parameters":{"QueuePriority":"3"},"Identifier":"0939271f-69d8-4e64-9ae9-4ba76e24220c","Type":"UpdateContactRoutingBehavior","Transitions":{"NextAction":"b3e78d1f-7e42-440c-af6c-49cf62bff1fd"}},{"Parameters":{"QueueId":"arn:aws:connect:us-west-2:533267357589:instance/e022b7cf-3653-4e87-8e1c-0e597a46b14b/queue/5e882104-a6c5-4757-863a-c19fe2e33f5e"},"Identifier":"a208b96e-e4c2-48a2-8e1f-299d0236a125","Type":"UpdateContactTargetQueue","Transitions":{"NextAction":"0939271f-69d8-4e64-9ae9-4ba76e24220c","Errors":[{"NextAction":"0939271f-69d8-4e64-9ae9-4ba76e24220c","ErrorType":"NoMatchingError"}]}},{"Parameters":{"QueuePriority":"4"},"Identifier":"f87c28db-1abf-4999-84a1-ae2e9d3a1888","Type":"UpdateContactRoutingBehavior","Transitions":{"NextAction":"b3e78d1f-7e42-440c-af6c-49cf62bff1fd"}},{"Parameters":{"QueueId":"arn:aws:connect:us-west-2:533267357589:instance/e022b7cf-3653-4e87-8e1c-0e597a46b14b/queue/e30b8e9c-c659-4706-8f18-b39178257449"},"Identifier":"86b056bd-8975-4120-b2ce-c36a2789cff8","Type":"UpdateContactTargetQueue","Transitions":{"NextAction":"f87c28db-1abf-4999-84a1-ae2e9d3a1888","Errors":[{"NextAction":"f87c28db-1abf-4999-84a1-ae2e9d3a1888","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ComparisonValue":"$.External.membershipLevel"},"Identifier":"ca702657-4318-45e7-8e79-5e01ddbe777a","Type":"Compare","Transitions":{"NextAction":"86b056bd-8975-4120-b2ce-c36a2789cff8","Conditions":[{"NextAction":"ba7830f9-032e-4f52-b684-63fd41905d46","Condition":{"Operator":"Equals","Operands":["Business"]}},{"NextAction":"a208b96e-e4c2-48a2-8e1f-299d0236a125","Condition":{"Operator":"Equals","Operands":["Gold"]}},{"NextAction":"86b056bd-8975-4120-b2ce-c36a2789cff8","Condition":{"Operator":"Equals","Operands":["Silver"]}},{"NextAction":"44bc6a76-4ae6-4980-8c79-bcc14c8e010d","Condition":{"Operator":"Equals","Operands":["Platinum"]}}],"Errors":[{"NextAction":"86b056bd-8975-4120-b2ce-c36a2789cff8","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"RecordingBehavior":{"RecordedParticipants":["Agent","Customer"]},"AnalyticsBehavior":{"Enabled":"True","AnalyticsLanguage":"en-US","AnalyticsRedactionBehavior":"Disabled","AnalyticsRedactionResults":"RedactedAndOriginal","ChannelConfiguration":{"Chat":{"AnalyticsModes":[]},"Voice":{"AnalyticsModes":["RealTime"]}}}},"Identifier":"abe68c59-2f0d-488c-a080-6b4b59d71279","Type":"UpdateContactRecordingBehavior","Transitions":{"NextAction":"ba5fb691-aa19-4ea6-a06c-03b7b4cbc3a7"}},{"Parameters":{"Text":"We did not understand your entry. Letâ€™s try again."},"Identifier":"435b3220-952f-4bd8-81f5-1be2abf25f21","Type":"MessageParticipant","Transitions":{"NextAction":"4f2e788f-9464-494a-9eeb-c7f3ef984a07","Errors":[{"NextAction":"4f2e788f-9464-494a-9eeb-c7f3ef984a07","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LoopCount":"3"},"Identifier":"7acf3728-51be-4770-931b-2bd2b99656d9","Type":"Loop","Transitions":{"NextAction":"a5196a1b-a6b6-42f4-88ee-31deb9062e68","Conditions":[{"NextAction":"435b3220-952f-4bd8-81f5-1be2abf25f21","Condition":{"Operator":"Equals","Operands":["ContinueLooping"]}},{"NextAction":"a5196a1b-a6b6-42f4-88ee-31deb9062e68","Condition":{"Operator":"Equals","Operands":["DoneLooping"]}}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-west-2:533267357589:function:getMembership","InvocationTimeLimitSeconds":"3","ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"48b5d355-b7fe-426e-a137-0de1c4e7ef9e","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"ca702657-4318-45e7-8e79-5e01ddbe777a","Errors":[{"NextAction":"ca702657-4318-45e7-8e79-5e01ddbe777a","ErrorType":"NoMatchingError"}]}},{"Parameters":{"TextToSpeechVoice":"Joanna","TextToSpeechEngine":"Neural","TextToSpeechStyle":"Conversational"},"Identifier":"ba5fb691-aa19-4ea6-a06c-03b7b4cbc3a7","Type":"UpdateContactTextToSpeechVoice","Transitions":{"NextAction":"24c3f6b2-f4fe-4d43-8a27-e36468017f0f"}},{"Parameters":{"Text":"What type of account do you have? Is it a Personal account or Business account?","LexV2Bot":{"AliasArn":"arn:aws:lex:us-west-2:533267357589:bot-alias/OBZKGO7CXM/3OI8TV7BMM"}},"Identifier":"4f2e788f-9464-494a-9eeb-c7f3ef984a07","Type":"ConnectParticipantWithLexBot","Transitions":{"NextAction":"7acf3728-51be-4770-931b-2bd2b99656d9","Conditions":[{"NextAction":"48b5d355-b7fe-426e-a137-0de1c4e7ef9e","Condition":{"Operator":"Equals","Operands":["BusinessAccount"]}},{"NextAction":"48b5d355-b7fe-426e-a137-0de1c4e7ef9e","Condition":{"Operator":"Equals","Operands":["PersonalAccount"]}}],"Errors":[{"NextAction":"7acf3728-51be-4770-931b-2bd2b99656d9","ErrorType":"NoMatchingCondition"},{"NextAction":"7acf3728-51be-4770-931b-2bd2b99656d9","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Is there anything else I can help you with? Say, Yes and I will return you to the main menu. Say, No and I will connect you with an agent, or you can disconnect now","LexV2Bot":{"AliasArn":"arn:aws:lex:us-west-2:533267357589:bot-alias/O0DNTXLRHY/SGD6GXJLGJ"}},"Identifier":"9aee3cef-25ac-49f2-ae61-d289bd474ba6","Type":"ConnectParticipantWithLexBot","Transitions":{"NextAction":"48b5d355-b7fe-426e-a137-0de1c4e7ef9e","Conditions":[{"NextAction":"24c3f6b2-f4fe-4d43-8a27-e36468017f0f","Condition":{"Operator":"Equals","Operands":["YES"]}},{"NextAction":"48b5d355-b7fe-426e-a137-0de1c4e7ef9e","Condition":{"Operator":"Equals","Operands":["NO"]}}],"Errors":[{"NextAction":"48b5d355-b7fe-426e-a137-0de1c4e7ef9e","ErrorType":"NoMatchingCondition"},{"NextAction":"48b5d355-b7fe-426e-a137-0de1c4e7ef9e","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Thank you for calling our Call center managed by Amazon Connect. You are using the self service system powered by Amazon Lex. What can I help you with? You can say things like, I need help with my account, or I would like to schedule an appointment.","LexV2Bot":{"AliasArn":"arn:aws:lex:us-west-2:533267357589:bot-alias/29WXB823LP/DEQBXDH3SF"}},"Identifier":"24c3f6b2-f4fe-4d43-8a27-e36468017f0f","Type":"ConnectParticipantWithLexBot","Transitions":{"NextAction":"4f2e788f-9464-494a-9eeb-c7f3ef984a07","Conditions":[{"NextAction":"4f2e788f-9464-494a-9eeb-c7f3ef984a07","Condition":{"Operator":"Equals","Operands":["AccountManagement"]}},{"NextAction":"9aee3cef-25ac-49f2-ae61-d289bd474ba6","Condition":{"Operator":"Equals","Operands":["ScheduleAppointment"]}}],"Errors":[{"NextAction":"4f2e788f-9464-494a-9eeb-c7f3ef984a07","ErrorType":"NoMatchingCondition"},{"NextAction":"4f2e788f-9464-494a-9eeb-c7f3ef984a07","ErrorType":"NoMatchingError"}]}}]}